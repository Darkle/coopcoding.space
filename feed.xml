<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Coop...Coding</title>
    <description>Coop&#39;s coding blog</description>
    <link>http://coopcoding.com/</link>
    <atom:link href="http://coopcoding.com/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sat, 25 Apr 2015 15:43:29 +1000</pubDate>
    <lastBuildDate>Sat, 25 Apr 2015 15:43:29 +1000</lastBuildDate>
    <generator>Jekyll v2.5.3</generator>
    
      <item>
        <title>An alternative to undelete in osx (and hiding the trash icon in the dock)</title>
        <description>&lt;h3 id=&quot;hazel-trash-preference&quot;&gt;Hazel Trash Preference&lt;/h3&gt;

&lt;p&gt;I’ve been thinking about getting an undelete program for OSX for a while, but I hadn’t really found one that I liked. A few weeks ago I purchased &lt;a href=&quot;http://www.noodlesoft.com/hazel.php&quot;&gt;Hazel&lt;/a&gt; (for an unrelated thing), and found that it had a really neat feature where it can delete files in your Trash folder if the file os older than X number of days:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://coopcoding.com/assets/images/blogpostimages/HazelSystemPreferences.png&quot; alt=&quot;Hazel System Preferences&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I realised this could be used as a poor-mans alternative to undelete&lt;/p&gt;

&lt;h3 id=&quot;removing-the-trash-icon-from-the-dock&quot;&gt;Removing the trash icon from the dock&lt;/h3&gt;

&lt;p&gt;One thing that could mess up this system though is accidentally emptying the trash. I have it pretty set in my brain that whenever I see the full trash icon in the dock I should right-click it and empty it, so I figured I’d better remove the trash icon in order to remove the temptation.&lt;/p&gt;

&lt;p&gt;After google-ing for a bit, I found &lt;a href=&quot;http://apple.stackexchange.com/questions/30415/how-can-i-remove-the-finder-icon-from-my-dock&quot;&gt;this post&lt;/a&gt; about removing the Finder icon from the dock, and then &lt;a href=&quot;https://discussions.apple.com/thread/6638249&quot;&gt;this post&lt;/a&gt; specifically about removing the Trash icon. Basically you need to alter the &lt;code&gt;/System/Library/CoreServices/Dock.app/Contents/Resources/DockMenus.plist&lt;/code&gt; file by inserting some XML to add a “Remove From Dock” option to the right-click menu for the Dock.&lt;/p&gt;

&lt;p&gt;In &lt;a href=&quot;http://apple.stackexchange.com/questions/30415/how-can-i-remove-the-finder-icon-from-my-dock#comment34912_30429&quot;&gt;the comments&lt;/a&gt; on the first post, it’s mentioned that you could automate this from the command line by using &lt;code&gt;defaults write&lt;/code&gt;, but in practice I found that this converts &lt;code&gt;DocMenus.plist&lt;/code&gt; from an XML text file to an XML binary file. The new binary XML file didn’t seem to work for me; no menu showed up on right click even after restarting the dock by running &lt;code&gt;killall Dock&lt;/code&gt; from the Terminal, so I had a quick hunt around for XML parsers/editors that work from the command line on OSX.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://xmlstar.sourceforge.net/&quot;&gt;XMLStarlet&lt;/a&gt; seemed to be fairly popular so I installed it using the always helpful &lt;a href=&quot;http://brew.sh/&quot;&gt;Homebrew&lt;/a&gt;. (after Homebrew is installed, you just need to run &lt;code&gt;brew install xmlstarlet&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;DockMenus.plist&lt;/code&gt; XML looks like this: &lt;a href=&quot;https://gist.github.com/Darkle/2ca4152ec3cbc90b8aa9&quot;&gt;https://gist.github.com/Darkle/2ca4152ec3cbc90b8aa9&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Specifically, we are after the array after the &lt;code&gt;&amp;lt;key&amp;gt;trash&amp;lt;/key&amp;gt;&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-markup&quot;&gt;&amp;lt;key&amp;gt;trash&amp;lt;/key&amp;gt;
&amp;lt;array&amp;gt;
  &amp;lt;dict&amp;gt;
    &amp;lt;key&amp;gt;command&amp;lt;/key&amp;gt;
    &amp;lt;integer&amp;gt;1000&amp;lt;/integer&amp;gt;
    &amp;lt;key&amp;gt;name&amp;lt;/key&amp;gt;
    &amp;lt;string&amp;gt;OPEN&amp;lt;/string&amp;gt;
  &amp;lt;/dict&amp;gt;
  &amp;lt;dict&amp;gt;
    &amp;lt;key&amp;gt;command&amp;lt;/key&amp;gt;
    &amp;lt;integer&amp;gt;2000&amp;lt;/integer&amp;gt;
    &amp;lt;key&amp;gt;separator&amp;lt;/key&amp;gt;
    &amp;lt;true/&amp;gt;
  &amp;lt;/dict&amp;gt;
  &amp;lt;dict&amp;gt;
    &amp;lt;key&amp;gt;command&amp;lt;/key&amp;gt;
    &amp;lt;integer&amp;gt;1001&amp;lt;/integer&amp;gt;
    &amp;lt;key&amp;gt;dynamic&amp;lt;/key&amp;gt;
    &amp;lt;integer&amp;gt;0&amp;lt;/integer&amp;gt;
    &amp;lt;key&amp;gt;name&amp;lt;/key&amp;gt;
    &amp;lt;string&amp;gt;EMPTY_TRASH&amp;lt;/string&amp;gt;
  &amp;lt;/dict&amp;gt;
  &amp;lt;dict&amp;gt;
    &amp;lt;key&amp;gt;command&amp;lt;/key&amp;gt;
    &amp;lt;integer&amp;gt;1040&amp;lt;/integer&amp;gt;
    &amp;lt;key&amp;gt;dynamic&amp;lt;/key&amp;gt;
    &amp;lt;integer&amp;gt;2&amp;lt;/integer&amp;gt;
    &amp;lt;key&amp;gt;name&amp;lt;/key&amp;gt;
    &amp;lt;string&amp;gt;SECURE_EMPTY_TRASH&amp;lt;/string&amp;gt;
  &amp;lt;/dict&amp;gt;
&amp;lt;/array&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;What we want to do is insert the following XML into the array element immediately after the &lt;code&gt;&amp;lt;key&amp;gt;trash&amp;lt;/key&amp;gt;&lt;/code&gt; element:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-markup&quot;&gt;&amp;lt;dict&amp;gt;
  &amp;lt;key&amp;gt;command&amp;lt;/key&amp;gt;
  &amp;lt;integer&amp;gt;1004&amp;lt;/integer&amp;gt;
  &amp;lt;key&amp;gt;name&amp;lt;/key&amp;gt;
  &amp;lt;string&amp;gt;REMOVE_FROM_DOCK&amp;lt;/string&amp;gt;
&amp;lt;/dict&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;After reading through the &lt;a href=&quot;http://xmlstar.sourceforge.net/doc/UG/xmlstarlet-ug.html#idm47077139594320&quot;&gt;documentation for editing XML files&lt;/a&gt; in XMLStarlet, it seemed like the natural thing to use would be the &lt;code&gt;-a&lt;/code&gt; option to append new XML elements like so:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;xml ed -a &quot;/foo/bar&quot; -t elem -n dict
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;(&lt;code&gt;ed&lt;/code&gt; command is for editing, &lt;code&gt;-a&lt;/code&gt; option is for “append”, &lt;code&gt;-t&lt;/code&gt; is for the type of element you are appending, in this case an “elem” or element and &lt;code&gt;-n&lt;/code&gt; for the name of the element).&lt;/p&gt;

&lt;p&gt;but for some reason append in XMLStarlet inserts the new element you are creating as a sibling to the element you selected in the xpath. So you seem to need to use the &lt;code&gt;-s&lt;/code&gt; subnode command to insert elements as childnodes of the element the xpath selects.&lt;/p&gt;

&lt;p&gt;To get the trash key via xpath, we can use&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;&quot;/plist/dict/key[.=&#39;trash&#39;]&quot; ...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;then we grab the first sibling and make sure it’s an array&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;&quot;/following-sibling::*[1][self::array]&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;so all up its&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;&quot;/plist/dict/key[.=&#39;trash&#39;]/following-sibling::*[1][self::array]&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then as the XMLStarlet command&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;xml ed -L -s &quot;/plist/dict/key[.=&#39;trash&#39;]/following-sibling::*[1][self::array]&quot; -t elem -n dict
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;(&lt;code&gt;-L&lt;/code&gt; option means to &lt;a href=&quot;http://stackoverflow.com/questions/5954168/how-to-insert-a-new-element-under-another-with-xmlstarlet/9172796#9172796&quot;&gt;edit the file in place&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;This should result in the following XML inside the trash array&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-markup&quot;&gt;&amp;lt;array&amp;gt;
  &amp;lt;dict&amp;gt;
    &amp;lt;key&amp;gt;command&amp;lt;/key&amp;gt;
    &amp;lt;integer&amp;gt;1000&amp;lt;/integer&amp;gt;
    &amp;lt;key&amp;gt;name&amp;lt;/key&amp;gt;
    &amp;lt;string&amp;gt;OPEN&amp;lt;/string&amp;gt;
  &amp;lt;/dict&amp;gt;
  &amp;lt;dict&amp;gt;
    &amp;lt;key&amp;gt;command&amp;lt;/key&amp;gt;
    &amp;lt;integer&amp;gt;2000&amp;lt;/integer&amp;gt;
    &amp;lt;key&amp;gt;separator&amp;lt;/key&amp;gt;
    &amp;lt;true/&amp;gt;
  &amp;lt;/dict&amp;gt;
  &amp;lt;dict&amp;gt;
    &amp;lt;key&amp;gt;command&amp;lt;/key&amp;gt;
    &amp;lt;integer&amp;gt;1001&amp;lt;/integer&amp;gt;
    &amp;lt;key&amp;gt;dynamic&amp;lt;/key&amp;gt;
    &amp;lt;integer&amp;gt;0&amp;lt;/integer&amp;gt;
    &amp;lt;key&amp;gt;name&amp;lt;/key&amp;gt;
    &amp;lt;string&amp;gt;EMPTY_TRASH&amp;lt;/string&amp;gt;
  &amp;lt;/dict&amp;gt;
  &amp;lt;dict&amp;gt;
    &amp;lt;key&amp;gt;command&amp;lt;/key&amp;gt;
    &amp;lt;integer&amp;gt;1040&amp;lt;/integer&amp;gt;
    &amp;lt;key&amp;gt;dynamic&amp;lt;/key&amp;gt;
    &amp;lt;integer&amp;gt;2&amp;lt;/integer&amp;gt;
    &amp;lt;key&amp;gt;name&amp;lt;/key&amp;gt;
    &amp;lt;string&amp;gt;SECURE_EMPTY_TRASH&amp;lt;/string&amp;gt;
  &amp;lt;/dict&amp;gt;
  &amp;lt;dict&amp;gt;
  &amp;lt;/dict&amp;gt;
&amp;lt;/array&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The lack of attributes (classes or id’s) or text in the dict elements makes it tough to be sure we are getting the right one to next insert the&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-markup&quot;&gt;&amp;lt;key&amp;gt;command&amp;lt;/key&amp;gt;
&amp;lt;integer&amp;gt;1004&amp;lt;/integer&amp;gt;
&amp;lt;key&amp;gt;name&amp;lt;/key&amp;gt;
&amp;lt;string&amp;gt;REMOVE_FROM_DOCK&amp;lt;/string&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;so I used the xpath option of checking for a dict element that had no child nodes, and then giving it a unique id to make the rest of the XML editing easier&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;xml ed -L -s &quot;/plist/dict/key[.=&#39;trash&#39;]/following-sibling::*[1][self::array]&quot; -t elem -n dict \
-i &quot;/plist/dict/key[.=&#39;trash&#39;]/following-sibling::*[1][self::array]/dict[not(*)]&quot; -t &quot;attr&quot; -n &quot;id&quot; -v &quot;removeFromDockDictionaryInsert&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;With XMLStarlet you can chain commands, so this is just the first subnode command with the new commands added at the end. You see we’re using the &lt;code&gt;-i&lt;/code&gt; option to insert something and that something’s type is an attribute (“attr”) with a name of “id” and a value of ”removeFromDockDictionaryInsert”.&lt;/p&gt;

&lt;p&gt;Now it’s easier to add more elements by just querying&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;&quot;//dict[@id=&#39;removeFromDockDictionaryInsert&#39;]&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Here is the final complete command&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;xml ed -L -s &quot;/plist/dict/key[.=&#39;trash&#39;]/following-sibling::*[1][self::array]&quot; -t elem -n dict \
-i &quot;/plist/dict/key[.=&#39;trash&#39;]/following-sibling::*[1][self::array]/dict[not(*)]&quot; -t &quot;attr&quot; -n &quot;id&quot; -v &quot;removeFromDockDictionaryInsert&quot; \
-s &quot;//dict[@id=&#39;removeFromDockDictionaryInsert&#39;]&quot; -t elem -n key -v &quot;command&quot; \
-s &quot;//dict[@id=&#39;removeFromDockDictionaryInsert&#39;]&quot; -t elem -n integer -v 1004 \
-s &quot;//dict[@id=&#39;removeFromDockDictionaryInsert&#39;]&quot; -t elem -n key -v &quot;name&quot; \
-s &quot;//dict[@id=&#39;removeFromDockDictionaryInsert&#39;]&quot; -t elem -n string -v &quot;REMOVE_FROM_DOCK&quot; DocMenus.plist
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;After this is run on the &lt;code&gt;DocMenus.plist&lt;/code&gt; file, your right-click menu for the Trash icon in the dock should look like this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://coopcoding.com/assets/images/blogpostimages/RemoveFromDockMenu.jpg&quot; alt=&quot;Remove From Dock Menu&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;removing-on-startup-via-launchd&quot;&gt;Removing on startup via launchd&lt;/h3&gt;

&lt;p&gt;I decided on using a bash script to backup the default &lt;code&gt;DockMenus.plist&lt;/code&gt;file, run the XMLStarlet commands and then hide the Trash icon via an applescript.&lt;/p&gt;

&lt;p&gt;The bash script looks as follows&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;#!/bin/sh
export PATH=/usr/local/bin:$PATH

### Back up the DockMenus.plist file
origPlist=/System/Library/CoreServices/Dock.app/Contents/Resources/DockMenus;
backupFolder=/Users/coop/Dropbox/OSXStuff/DockTrashScripts
cp $origPlist.plist $backupFolder/DockMenus-BAK.plist;

### Double check it&#39;s not already there
elemCheck=$(xml sel -t -v &quot;count(//dict[@id=&#39;removeFromDockDictionaryInsert&#39;])&quot; $origPlist.plist)

if [ $elemCheck -eq 0 ]
then
    xml ed -L -s &quot;/plist/dict/key[.=&#39;trash&#39;]/following-sibling::*[1][self::array]&quot; -t elem -n dict -i &quot;/plist/dict/key[.=&#39;trash&#39;]/following-sibling::*[1][self::array]/dict[not(*)]&quot; -t &quot;attr&quot; -n &quot;id&quot; -v &quot;removeFromDockDictionaryInsert&quot; -s &quot;//dict[@id=&#39;removeFromDockDictionaryInsert&#39;]&quot; -t elem -n key -v &quot;command&quot; -s &quot;//dict[@id=&#39;removeFromDockDictionaryInsert&#39;]&quot; -t elem -n integer -v 1004 -s &quot;//dict[@id=&#39;removeFromDockDictionaryInsert&#39;]&quot; -t elem -n key -v &quot;name&quot; -s &quot;//dict[@id=&#39;removeFromDockDictionaryInsert&#39;]&quot; -t elem -n string -v &quot;REMOVE_FROM_DOCK&quot; $origPlist.plist
fi

### Run the applescript that selects the right-click menu to hide the Trash icon
osascript $backupFolder/HideTrashIconInDock.scpt
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;and then make it executable by running &lt;code&gt;chmod +x&lt;/code&gt; on the bash script file.&lt;/p&gt;

&lt;p&gt;In the &lt;code&gt;HideTrashIconInDock.scpt&lt;/code&gt; script is the following Applescript&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-applescript&quot;&gt;tell application &quot;System Events&quot; to tell process &quot;Dock&quot;
	tell UI element &quot;Trash&quot; of list 1
		perform action &quot;AXShowMenu&quot;
		click menu item &quot;Remove from Dock&quot; of menu 1
	end tell
end tell
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;What this does is it uses the accessibility features in OSX to show the right-click menu for the trash then select the “Remove from Dock” option.&lt;/p&gt;

&lt;p&gt;Then I created a file called &lt;code&gt;com.coop.removeTrashIconFromDock.plist&lt;/code&gt; in the &lt;code&gt;/Users/coop/Library/LaunchAgents/&lt;/code&gt;folder conatining the following XML&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-markup&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&amp;gt;
&amp;lt;plist version=&quot;1.0&quot;&amp;gt;
	&amp;lt;dict&amp;gt;
		&amp;lt;key&amp;gt;Label&amp;lt;/key&amp;gt;
		&amp;lt;string&amp;gt;com.coop.removeTrashIconFromDock&amp;lt;/string&amp;gt;
		&amp;lt;key&amp;gt;Program&amp;lt;/key&amp;gt;
		&amp;lt;key&amp;gt;LaunchOnlyOnce&amp;lt;/key&amp;gt;
		&amp;lt;true/&amp;gt;
        &amp;lt;string&amp;gt;/Users/coop/Dropbox/OSXStuff/DockTrashScripts/bakupAndAlterPlist.sh&amp;lt;/string&amp;gt;
		&amp;lt;key&amp;gt;RunAtLoad&amp;lt;/key&amp;gt;
		&amp;lt;true/&amp;gt;
	&amp;lt;/dict&amp;gt;
&amp;lt;/plist&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This file will be run by &lt;a href=&quot;http://launchd.info/&quot;&gt;launchd&lt;/a&gt; on startup. When this runs the first time, you will probably be asked to give &lt;code&gt;bakupAndAlterPlist.sh&lt;/code&gt; Accessibility access in the OSX preferences (see below).&lt;/p&gt;

&lt;p&gt;If you don’t want to wait for a restart to load the Launch Agent, you can use the following command:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;launchctl load ~/Library/LaunchAgents/com.coop.removeTrashIconFromDock.plist
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;and to unload&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;launchctl unload  ~/Library/LaunchAgents/com.coop.removeTrashIconFromDock.plist
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;More info here: &lt;a href=&quot;http://launchd.info/&quot;&gt;http://launchd.info/)&lt;/a&gt; (click on the “Operation” tab)&lt;/p&gt;

&lt;p&gt;Side note: For messing around with applescript in the terminal or in the applescript script editor with scripts that need to accesses accessibility features, you might want to add Terminal.app, &lt;a href=&quot;http://jacobsalmela.com/os-x-yosemite-osascript-enabling-access-assistive-devices/&quot;&gt;osascript&lt;/a&gt; and Script Editor.app to the Security and Privacy Accessibility&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://support.apple.com/library/content/dam/edam/applecare/images/en_US/osx/privacy_prefs.png&quot; alt=&quot;Security &amp;amp; Privacy Preferences&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Sun, 19 Apr 2015 01:43:40 +1000</pubDate>
        <link>http://coopcoding.com/blog/an-alternative-to-undelete-in-osx-(and-hiding-the-trash-icon-in-the-dock)</link>
        <guid isPermaLink="true">http://coopcoding.com/blog/an-alternative-to-undelete-in-osx-(and-hiding-the-trash-icon-in-the-dock)</guid>
        
        <category>osx</category>
        
        <category>dock</category>
        
        <category>hazel</category>
        
        <category>launchd</category>
        
        
        <category>blog</category>
        
      </item>
    
      <item>
        <title>My Jekyll Setup For This Blog</title>
        <description>&lt;p&gt;So I wanted to set up a coding blog I decided on using &lt;a href=&quot;http://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; because it’s relatively easy to set up and there’s tons of good info &amp;amp; tutorials on the web. I briefly played around with &lt;a href=&quot;http://gohugo.io/&quot;&gt;Hugo&lt;/a&gt;, and although the documentation on the site is really good, I didn’t find much in the way of tutorials and articles from 3rd-party sites, so I stuck with Jekyll.&lt;/p&gt;

&lt;h3 id=&quot;blog-structure&quot;&gt;Blog Structure&lt;/h3&gt;

&lt;p&gt;For the site structure, I wanted it to be &lt;code&gt;coopcoding.com/projects/projectname/&lt;/code&gt; and &lt;code&gt;coopcoding.com/blog/blog post title/&lt;/code&gt;. This turned out to be a bit more difficult than I first envisioned. The &lt;code&gt;coopcoding.com/blog/blog post title/&lt;/code&gt; was fairly easy to set up, but &lt;code&gt;coopcoding.com/projects/projectname/&lt;/code&gt; took a bit of work.&lt;/p&gt;

&lt;p&gt;At first I thought I would use the &lt;a href=&quot;http://jekyllrb.com/docs/pages/&quot;&gt;default&lt;/a&gt; way of creating pages and just stick them in the &lt;code&gt;coopcoding.com/projects/&lt;/code&gt; folder, but unfortunately there is currently (&lt;small&gt;&lt;small&gt;jekyll 2.5.3&lt;/small&gt;&lt;/small&gt;) no way to iterate through all the pages in a directory. You can use collections or add data to the data directory, but these won’t really work with the default pagination.&lt;/p&gt;

&lt;p&gt;What I ended up doing was creating only blog posts and giving them either a “blog” category or a “projects” category. Then I used tags for if I wanted to show a grouping of posts or projects, e.g. if I was creating a blog post or a project about a chrome extension, in the yaml front matter for that post I would write something like:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-yaml&quot;&gt;---
title:  &quot;My Chrome Extension Project&quot;
date:   2015-02-15 10:14:35
tags:
  -Chrome Extension
  -Browser
summary: &quot;This is the summary for the chrome extension project&quot;
---
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then, in my _config.yml for the site I put the following:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-yaml&quot;&gt;permalink: /:categories/:title
defaults:
  -
    scope:
      path: &quot;blog&quot;
      type: &quot;posts&quot;
    values:
      layout: &quot;post&quot;
      category: &quot;blog&quot;
  -
    scope:
      path: &quot;projects&quot;
      type: &quot;posts&quot;
    values:
      layout: &quot;project&quot;
      category: &quot;projects&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The &lt;code&gt;permalink: /:categories/:title&lt;/code&gt; tells jekyll to spit out all the posts in the &lt;code&gt;_posts&lt;/code&gt; folder and take what category they are (in this case either a blog or project) and create subfolders in the output directory of &lt;code&gt;coopcoding.com/projects/&lt;/code&gt; &amp;amp; &lt;code&gt;coopcoding.com/blog/&lt;/code&gt; and generate all the blog posts in those subdirectories for each category.&lt;/p&gt;

&lt;p&gt;Then I created an index.html page inside of the &lt;code&gt;/projects/&lt;/code&gt; folder and inside of the &lt;code&gt;/blog/&lt;/code&gt; folder. These were so that when a user visited &lt;code&gt;coopcoding.com/projects/&lt;/code&gt;, they would be shown a list of the latest project pages, and when they visited &lt;code&gt;coopcoding.com/blog/&lt;/code&gt;, they would be shown a list of the latest blog posts.&lt;/p&gt;

&lt;p&gt;Here are screenshots of my Jekyll folder structure to better explain it:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://coopcoding.com/assets/images/blogpostimages/jek-folder-ss.png&quot; alt=&quot;Jekyll Folder Structure&quot; /&gt;&lt;/p&gt;

&lt;p&gt;and a screenshot of Jekyll’s output folder structure:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://coopcoding.com/assets/images/blogpostimages/jek-build-folder-structure.png&quot; alt=&quot;Jekyll Output Folder Structure&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Here is the html for the index.html in the &lt;code&gt;/projects/&lt;/code&gt; folder: &lt;a href=&quot;https://github.com/Darkle/coopcoding.com_jekyll_version/blob/master/_layouts/project.html&quot;&gt;https://github.com/Darkle/coopcoding.com_jekyll_version/blob/master/_layouts/project.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can see I’m looping over the &lt;code&gt;site.categories.projects&lt;/code&gt; and listing each post in the “projects” category.&lt;/p&gt;

&lt;p&gt;It’s pretty much the same for the html in the index.html in the &lt;code&gt;/blog/&lt;/code&gt; folder: &lt;a href=&quot;https://github.com/Darkle/coopcoding.com_jekyll_version/blob/master/_layouts/project.html&quot;&gt;https://github.com/Darkle/coopcoding.com_jekyll_version/blob/master/_layouts/project.html&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;tags&quot;&gt;Tags&lt;/h3&gt;

&lt;p&gt;For generating “tag” pages, I used the code and process listed &lt;a href=&quot;http://charliepark.org/tags-in-jekyll/&quot;&gt;here&lt;/a&gt;. You can see the tag pages output in the screenshot of Jekyll’s output folder structure above.&lt;/p&gt;

&lt;h3 id=&quot;blog--project-layouts&quot;&gt;Blog &amp;amp; Project Layouts&lt;/h3&gt;

&lt;p&gt;Obviously I wanted to have different layouts for the blog post and project posts, so I used the following in my &lt;code&gt;_config.yml&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-yaml&quot;&gt;defaults:
  -
    scope:
      path: &quot;blog&quot;
      type: &quot;posts&quot;
    values:
      layout: &quot;post&quot;
      category: &quot;blog&quot;
  -
    scope:
      path: &quot;projects&quot;
      type: &quot;posts&quot;
    values:
      layout: &quot;project&quot;
      category: &quot;projects&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This tells Jekyll that for posts in that end up in the path &lt;code&gt;coopcoding.com/blog/&lt;/code&gt; and are of the type “posts” that they are all in the category of “blog” and should use the layout “post”. The layout of “post” corresponds to the &lt;a href=&quot;https://github.com/Darkle/coopcoding.com_jekyll_version/blob/master/_layouts/post.html&quot;&gt;post.html&lt;/a&gt; in the &lt;code&gt;_layouts directory&lt;/code&gt;. It then tells Jekyll that for posts in that end up in the path &lt;code&gt;coopcoding.com/projects/&lt;/code&gt; and are of the type “posts” that they are all in the category of “projects” and should use the layout “project”. The layout of “post” corresponds to the &lt;a href=&quot;https://github.com/Darkle/coopcoding.com_jekyll_version/blob/master/_layouts/project.html&quot;&gt;project.html&lt;/a&gt; in the &lt;code&gt;_layouts directory&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;You can also see my complete &lt;code&gt;_config.yml&lt;/code&gt; here: &lt;a href=&quot;https://github.com/Darkle/coopcoding.com_jekyll_version/blob/master/_config.yml&quot;&gt;https://github.com/Darkle/coopcoding.com_jekyll_version/blob/master/_config.yml&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;syntax-highlighting&quot;&gt;Syntax Highlighting&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://jekyllrb.com/docs/templates/#code-snippet-highlighting&quot;&gt;Pygments&lt;/a&gt; is the default syntax highlighter for Jekyll. It’s pretty good, but I didn’t really like the syntax that you have to use for code blocks:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{% highlight ruby %}

def foo

  puts &#39;foo&#39;

end

{% endhighlight %}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Luckily, the Kramdown &lt;a href=&quot;http://jekyllrb.com/docs/configuration/#kramdown&quot;&gt;markdown interpreter in Jekyll supports&lt;/a&gt; Github Flavoured Markdown, specifically the &lt;a href=&quot;https://help.github.com/articles/github-flavored-markdown/#syntax-highlighting&quot;&gt;code blocks&lt;/a&gt;. With this enabled, a code block like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;``` ruby

def print_hi(name)

  puts &quot;Hi, #{name}&quot;

end

print_hi(&#39;Tom&#39;)

#=&amp;gt; prints &#39;Hi, Tom&#39; to STDOUT.

```
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;will be render into this HTML:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-markup&quot;&gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&quot;language-ruby&quot;&amp;gt;
def print_hi(name)
  puts &quot;Hi, #{name}&quot;
end
print_hi(&#39;Tom&#39;)
#=&amp;gt; prints &#39;Hi, Tom&#39; to STDOUT.
&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For the actual syntax highlighting, I couldn’t seem to get rouge to generate line numbers, so I used &lt;a href=&quot;http://prismjs.com/&quot;&gt;prism.js&lt;/a&gt;. The prism.js output looks great and I figure so long as the javascript is at the bottom of the page and not blocking anything loading it should be fine and wont annoy people viewing the page. On the &lt;a href=&quot;http://prismjs.com/download.html&quot;&gt;prism.js download page&lt;/a&gt; you can pick and choose what languages to support, which is pretty neat.&lt;/p&gt;

&lt;p&gt;Prism checks any &lt;code&gt;&amp;lt;code&amp;gt;&lt;/code&gt; elements on the page for the class &lt;code&gt;&quot;language-foo&quot;&lt;/code&gt;, where “foo” is the name of the language that’s in the code block.&lt;/p&gt;

&lt;p&gt;One thing that did trip me up a bit with prism.js was that in order to use the line number feature, you need to give the code block a class of &lt;code&gt;line-numbers&lt;/code&gt;, which isn’t too big of a deal as I could just add the element attribute to the end of each code block like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;``` ruby

def print_hi(name)

  puts &quot;Hi, #{name}&quot;

end

print_hi(&#39;Tom&#39;)

#=&amp;gt; prints &#39;Hi, Tom&#39; to STDOUT.

```

{: .line-numbers}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;But that seemed like a bit of a hassle. What I really wanted was for the line numbers to show up if the code was more than one line. Unfortunately there is no automatic way to do this with prism, so I went ahead and altered the way the line numbers plugin worked.&lt;/p&gt;

&lt;p&gt;Here is the original prism.js plugin code&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-javascript&quot;&gt;Prism.hooks.add(&#39;after-highlight&#39;, function (env) {
	// works only for &amp;lt;code&amp;gt; wrapped inside &amp;lt;pre data-line-numbers&amp;gt; (not inline)
	var pre = env.element.parentNode;
	if (!pre || !/pre/i.test(pre.nodeName) || pre.className.indexOf(&#39;line-numbers&#39;) === -1) {
		return;
	}

	var linesNum = (1 + env.code.split(&#39;\n&#39;).length);
	var lineNumbersWrapper;

	var lines = new Array(linesNum);
	lines = lines.join(&#39;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&#39;);

	lineNumbersWrapper = document.createElement(&#39;span&#39;);
	lineNumbersWrapper.className = &#39;line-numbers-rows&#39;;
	lineNumbersWrapper.innerHTML = lines;

	if (pre.hasAttribute(&#39;data-start&#39;)) {
		pre.style.counterReset = &#39;linenumber &#39; + (parseInt(pre.getAttribute(&#39;data-start&#39;), 10) - 1);
	}

	env.element.appendChild(lineNumbersWrapper);

});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;and my changes&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-javascript&quot;&gt;Prism.hooks.add(&#39;after-highlight&#39;, function (env) {
	// works only for &amp;lt;code&amp;gt; wrapped inside &amp;lt;pre data-line-numbers&amp;gt; (not inline)
	var pre = env.element.parentNode;
	var multiLineCheck = env.code.match(/\n(?!$)/g);

	//ignore if not a pre element or if only one line
	if (!pre || !/pre/i.test(pre.nodeName) || !multiLineCheck) {
		return;
	}

	//for the highlighting CSS
	if(pre.className.indexOf(&#39;line-numbers&#39;) === -1) {
		pre.className += &#39; line-numbers&#39;;
	}

	var linesNum = multiLineCheck.length + 1;
	var lineNumbersWrapper;

	var lines = new Array(linesNum + 1);
	lines = lines.join(&#39;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&#39;);

	lineNumbersWrapper = document.createElement(&#39;span&#39;);
	lineNumbersWrapper.className = &#39;line-numbers-rows&#39;;
	lineNumbersWrapper.innerHTML = lines;

	if (pre.hasAttribute(&#39;data-start&#39;)) {
		pre.style.counterReset = &#39;linenumber &#39; + (parseInt(pre.getAttribute(&#39;data-start&#39;), 10) - 1);
	}

	env.element.appendChild(lineNumbersWrapper);

});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can see it now only checks to see if it is a pre element and if it has more than one line. Then if it doesn’t have a class name of “line-numbers” it adds it in order for the CSS rules for the line numbering to be applied. (note: my code uses some code from &lt;a href=&quot;https://github.com/PrismJS/prism/pull/385/commits&quot;&gt;this pull request&lt;/a&gt; to fix extra lines being added)&lt;/p&gt;

&lt;h3 id=&quot;plugins-building-locally--alfred&quot;&gt;Plugins, Building Locally &amp;amp; Alfred&lt;/h3&gt;

&lt;p&gt;Because Github pages only supports a &lt;a href=&quot;https://help.github.com/articles/using-jekyll-plugins-with-github-pages/&quot;&gt;few plugins&lt;/a&gt; and I wanted to use &lt;a href=&quot;http://charliepark.org/tags-in-jekyll/&quot;&gt;this&lt;/a&gt; tag plugin, I had to set it up so that Jekyll built the site locally, then I pushed that built version to my &lt;a href=&quot;https://github.com/Darkle/darkle.github.io&quot;&gt;darkle.github.io repository&lt;/a&gt;. Doing this manually is a bit of a pain, but I stumbled on to &lt;a href=&quot;http://spinhalf.net/2015/01/04/getting-started-with-a-jekyll-blog/&quot;&gt;this neat article&lt;/a&gt; about using an &lt;a href=&quot;http://www.alfredapp.com/&quot;&gt;Alfred&lt;/a&gt; workflow to make things faster and easier.&lt;/p&gt;

&lt;p&gt;Basically it allows you to create a new Jekyll post (including front-matter) with an shortcut in Alfred.&lt;/p&gt;

&lt;p&gt;My Alfred workflow shortcuts look like this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://coopcoding.com/assets/images/blogpostimages/Jek-Alfred-ss3.png&quot; alt=&quot;Jekyll Alfred Screenshot&quot; /&gt;&lt;/p&gt;

&lt;p&gt;When I select a new blog post it runs the following bash commands:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;# Adjust these variables to your installation:

sitedir=/Users/username/site_jekyll_files/
editor=&quot;Typora.app&quot;
extension=md

filename=$(echo $sitedir/_posts/blog/$(date +&#39;%Y-%m-%d&#39;)-{query}.$extension | sed -e &#39;s, ,-,g&#39; | tr &#39;[:upper:]&#39; &#39;[:lower:]&#39;)

cat &amp;lt;&amp;lt;EOT &amp;gt;&amp;gt; $filename
---
title: {query}
date: $(date +&#39;%Y-%m-%d %H:%M:%S&#39;)
tags:[]
---


EOT
open -a &quot;$editor&quot; $filename
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;What this does is takes the title I gave it in Alfred and prepends the current date to that, then it creates a new file in the &lt;code&gt;_posts/blog/&lt;/code&gt; directory and uses that title and date as the file name (Jekyll needs a &lt;code&gt;YEAR-MONTH-DAY-title.MARKUP&lt;/code&gt; format for post file names). Then it adds the default front-matter for blog posts, plus the blog title that was specified by me in Alfred. It then opens that file in my markdown editor &lt;a href=&quot;http://typora.io/&quot;&gt;Typora.app&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When I select a new project post it runs the following bash commands:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;# Adjust these variables to your installation:

sitedir=/Users/username/site_jekyll_files/
editor=&quot;Typora.app&quot;
extension=md

filename=$(echo $sitedir/_posts/projects/$(date +&#39;%Y-%m-%d&#39;)-{query}.$extension | sed -e &#39;s, ,-,g&#39; | tr &#39;[:upper:]&#39; &#39;[:lower:]&#39;)

cat &amp;lt;&amp;lt;EOT &amp;gt;&amp;gt; $filename
---
title: {query}
date: $(date +&#39;%Y-%m-%d %H:%M:%S&#39;)
tags: []
summary:
---


EOT
open -a &quot;$editor&quot; $filename
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;which is pretty much the same except it creates the post in the &lt;code&gt;_posts/projects/&lt;/code&gt; folder and it has a slightly different front-matter.&lt;/p&gt;

&lt;p&gt;The “Build And Push To Github” runs the following bash commands:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;# Adjust these variables to your installation:

export PATH=/usr/local/bin:$PATH

JEKYLL_BLOG_DIRECTORY=&quot;/Users/username/Coding/Projects/coopcoding.com/jekyll_files/&quot;

DATE_TIME=$(date +&#39;%Y-%m-%d %H:%M:%S&#39;)

cd $JEKYLL_BLOG_DIRECTORY
git add .
git commit -a -m &quot;Post $DATE_TIME&quot;
#check if there were any new files made on github
git pull --rebase
#push to github
git push origin master

terminal-notifier -title &quot;Git Push for CoopCoding Jekyll Files Done&quot; -message &quot;&quot; -open &quot;https://github.com/Darkle/coopcoding.com_jekyll_version&quot;

jekyll build

terminal-notifier -title &quot;Jekyll Built Static Files&quot; -message &quot;&quot;

STATIC_BLOG_DIRECTORY=&quot;/Users/username/Coding/Projects/coopcoding.com/darkle.github.io/&quot;

cd $STATIC_BLOG_DIRECTORY
git add .
git commit -a -m &quot;Post $DATE_TIME&quot;
git push origin master

terminal-notifier -title &quot;Git Push for CoopCoding Static Files Done&quot; -message &quot;&quot; -open &quot;https://github.com/Darkle/darkle.github.io&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This adds all files/new files to the git repository in my jekyll files folder. Then commits the change(s) to the repository with a message that includes the date and time. Then it checks to see if there were any changes made from somewhere else, then it pushes to github.&lt;/p&gt;

&lt;p&gt;Next, jekyll builds the static site, then the script adds files to the static git repository, commits and pushes to github.&lt;/p&gt;

&lt;p&gt;Originally I was going to use the default notifier for OSX in the bash script to notify me when the git pushes and the jekyll build was finished but it wasn’t working for me, so I used this library insted: &lt;a href=&quot;https://github.com/alloy/terminal-notifier&quot;&gt;https://github.com/alloy/terminal-notifier&lt;/a&gt;. Note: the bash shell jekyll uses didn’t seem to load my default &lt;code&gt;.bash_profile&lt;/code&gt; file automatically, so I had to manually put in &lt;code&gt;export PATH=/usr/local/bin:$PATH&lt;/code&gt; so that it could see the terminal-notifier library I had installed via homebrew.&lt;/p&gt;

&lt;p&gt;The “Open Blog Post” runs the following bash commands:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;# Adjust these variables to your installation:

sitedir=/Users/username/Coding/Projects/coopcoding.com/jekyll_files/
extension=markdown

IFS=$&#39;\n&#39;

files=$(find $sitedir/_posts/blog -iname &quot;*.$extension&quot; | xargs ls -r |perl -MHTML::Entities -CS -pe&#39;$_ = encode_entities($_, q{&amp;amp;&amp;lt;&amp;gt;&quot;&#39;\&#39;&#39;})&#39;)

echo &quot;&amp;lt;?xml version=&#39;1.0&#39;?&amp;gt;&amp;lt;items&amp;gt;&quot;
for file in ${files}; do
	echo &quot;&amp;lt;item uuid=&#39;file&#39; arg=&#39;${file}&#39; type=&#39;file&#39;&amp;gt;&quot;
	echo &quot;&amp;lt;title&amp;gt;$(basename ${file})&amp;lt;/title&amp;gt;&quot;
	echo &quot;&amp;lt;subtitle&amp;gt;${file}&amp;lt;/subtitle&amp;gt;&quot;
	echo &quot;&amp;lt;icon type=&#39;fileicon&#39;&amp;gt;${file}&amp;lt;/icon&amp;gt;&quot;
	echo &quot;&amp;lt;/item&amp;gt;&quot;
done
echo &quot;&amp;lt;/items&amp;gt;&quot;
fi
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;What this does is iterate through all of the files in the &lt;code&gt;_posts/blog&lt;/code&gt; directory and then list them in Alfred. When you select which file you want, Alfred then opens that file in the markdown editor.&lt;/p&gt;

&lt;p&gt;The “Serve Jekyll Blog” opens a terminal, cd’s to the jekyll blog files then serves from that directory&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://coopcoding.com/assets/images/blogpostimages/AlfredPreferences.png&quot; alt=&quot;Alfred Screenshot&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Then it opens the blog in the default browser by running the following bash commands&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;#wait for the jekyll server to start up
sleep 3
open http://127.0.0.1:4000/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can grab my Alfred workflow &lt;a href=&quot;https://drive.google.com/uc?export=download&amp;amp;id=0B2rOnFGX-QzGajEySER5TWd5OEU&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;editing-the-markdown&quot;&gt;Editing The Markdown&lt;/h3&gt;

&lt;p&gt;I tried a number of Markdown editors, but settled on &lt;a href=&quot;http://typora.io/&quot;&gt;Typora&lt;/a&gt;. It has a number of neat features such as supporting &lt;a href=&quot;https://help.github.com/articles/github-flavored-markdown/#fenced-code-blocks&quot;&gt;github style code fences&lt;/a&gt;(and highlighting them), YAML front matter recognition and showing images while editing the post. Here’s a screenshot of me editing this post in Typora:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://coopcoding.com/assets/images/blogpostimages/TyporaSS.png&quot; alt=&quot;Typora Screenshot&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You can see that the code block is highlighted and the image is displayed while editing. Check out all the features it has here: &lt;a href=&quot;http://typora.io/#feature&quot;&gt;http://typora.io/#feature&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;automatic-images-in-typora&quot;&gt;Automatic Images In Typora&lt;/h3&gt;

&lt;p&gt;In order to get the images that I’m working with for blog posts to show up while I’m editing them, they needed to be hosted online. I thought about just using an image hoster like imgur, but I really wanted to keep control of the hosting.&lt;/p&gt;

&lt;p&gt;I could always build and push the blog every time I added a new image to the blog post I was editing, but that seemed really inefficient. What I settled on was using OSX’s folder action feature to copy the file from the image assets folder in my jekyll folder to the static output folder and then pushing that to github so that the image is now being served by github and Typora can display it in the editor.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-applescript&quot;&gt;--from http://foolsworkshop.com/applescript/2008/05/an-applescript-replace-text-method/
on replaceText(find, replace, subject)
  set prevTIDs to text item delimiters of AppleScript
  set text item delimiters of AppleScript to find
  set subject to text items of subject

  set text item delimiters of AppleScript to replace
  set subject to &quot;&quot; &amp;amp; subject
  set text item delimiters of AppleScript to prevTIDs

  return subject
end replaceText

on adding folder items to this_folder after receiving added_items
  try
    tell application &quot;Finder&quot;
      --get the name of the folder
      set the folder_name to the name of this_folder
    end tell

    set textToReplace to &quot;file:///Users/coop/Dropbox/Coding/Projects/coopcoding.com/coopcoding.com_jekyll_version&quot;
    set folderToCopyTo to &quot;Macintosh HD:Users:coop:Dropbox:Coding:Projects:coopcoding.com:darkle.github.io:assets:images:blogpostimages&quot;
    set convertedTextForClipboard to &quot;&quot;

    repeat with aFile in added_items

      tell application &quot;Finder&quot;
        try
          set fileProps to (get properties of aFile)
          set fileURL to (get URL of fileProps) as string
        on error errMsg
          display dialog &quot;ERROR: &quot; &amp;amp; errMsg
        end try

      end tell

      --the last &amp;amp; is for a new line in case there is more than one image
      set convertedTextForClipboard to convertedTextForClipboard &amp;amp; (get replaceText(textToReplace, &quot;http://coopcoding.com&quot;, fileURL)) &amp;amp; &quot;
&quot;
      set filePosixURL to get replaceText(&quot;file://&quot;, &quot;&quot;, fileURL)

      tell application &quot;Finder&quot;
        copy aFile to folder folderToCopyTo
      end tell

    end repeat

    set the clipboard to convertedTextForClipboard

    do shell script &quot;DATE_TIME=$(date +&#39;%Y-%m-%d %H:%M:%S&#39;) &amp;amp;&amp;amp; cd &#39;/Users/coop/Dropbox/Coding/Projects/coopcoding.com/darkle.github.io/&#39; &amp;amp;&amp;amp; git add . &amp;amp;&amp;amp; git commit -a -m &#39;Post $DATE_TIME&#39; &amp;amp;&amp;amp; git push origin master &amp;amp;&amp;amp; export PATH=/usr/local/bin:$PATH &amp;amp;&amp;amp; terminal-notifier -title &#39;Git Push for CoopCoding Static Images Done&#39; -message &#39;&#39; -open &#39;https://github.com/Darkle/darkle.github.io&#39;&quot;

  on error errMsg
    display dialog &quot;ERROR: &quot; &amp;amp; errMsg
  end try

end adding folder items to
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;image-optimization&quot;&gt;Image Optimization&lt;/h3&gt;

&lt;p&gt;In order to optimize the images before serving them, I used the great &lt;a href=&quot;https://imageoptim.com/&quot;&gt;ImageOptim&lt;/a&gt; app and a folder action to trigger it.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-applescript&quot;&gt;on adding folder items to this_folder after receiving added_items
  --delay so dont interfere with the other folder action that copies the image
  delay 3
  try
    tell application &quot;Finder&quot;
      --get the name of the folder
      set the folder_name to the name of this_folder
    end tell

    set the item_count to the number of items in the added_items

    repeat with aFile in added_items

      tell application &quot;Finder&quot;
        try
          set fileProps to (get properties of aFile)
          set fName to (get name of fileProps)

        on error errMsg
          display dialog &quot;ERROR: &quot; &amp;amp; errMsg
        end try

      end tell

      tell application &quot;ImageOptim&quot; to open aFile

    end repeat

    delay 2

    tell application &quot;ImageOptim&quot; to activate

  on error errMsg
    display dialog &quot;ERROR: &quot; &amp;amp; errMsg
  end try
end adding folder items to
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now every time I add a new photo to the &lt;code&gt;/assets/images/blogpostimages&lt;/code&gt; folder, it runs the applescript above and opens the image(s) in ImageOptim and optimises the image(s).&lt;/p&gt;

</description>
        <pubDate>Mon, 06 Apr 2015 22:46:26 +1000</pubDate>
        <link>http://coopcoding.com/blog/my-jekyll-setup-for-this-blog</link>
        <guid isPermaLink="true">http://coopcoding.com/blog/my-jekyll-setup-for-this-blog</guid>
        
        <category>Jekyll</category>
        
        <category>Alfred</category>
        
        
        <category>blog</category>
        
      </item>
    
      <item>
        <title>Cabin</title>
        <description>&lt;h3 id=&quot;description&quot;&gt;Description:&lt;/h3&gt;

&lt;p&gt;Cum sociis natoque penatibus et magnis &lt;a href=&quot;#&quot;&gt;dis parturient montes&lt;/a&gt;, nascetur ridiculus mus. &lt;em&gt;Aenean eu leo quam.&lt;/em&gt; Pellentesque ornare sem lacinia quam venenatis vestibulum. Sed posuere consectetur est at lobortis. Cras mattis consectetur purus sit amet fermentum.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,&lt;br /&gt;
consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.&lt;br /&gt;
Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;You’ll find this post in your &lt;code&gt;_posts&lt;/code&gt; directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run &lt;code&gt;jekyll serve&lt;/code&gt;, which launches a web server and auto-regenerates your site when a file is updated.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-ruby&quot;&gt;def print_hi(name)
  puts &quot;Hi, #{name}&quot;
end
print_hi(&#39;Tom&#39;)
#=&amp;gt; prints &#39;Hi, Tom&#39; to STDOUT.
&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;lineno&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;foo&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;2&lt;/span&gt;   &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;foo&amp;#39;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;version-history&quot;&gt;Version History:&lt;/h3&gt;

&lt;ul class=&quot;version-history&quot;&gt;
  &lt;li&gt;0.5 Added feature y&lt;/li&gt;
  &lt;li&gt;0.4 Fixed the thing again&lt;/li&gt;
  &lt;li&gt;0.3 Added feature x&lt;/li&gt;
  &lt;li&gt;0.2 Fixed the thing&lt;/li&gt;
  &lt;li&gt;0.1 Initial Commit&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gradient-more&quot;&gt;&lt;/div&gt;
&lt;p&gt;&lt;a class=&quot;link-more&quot; href=&quot;#&quot;&gt;Show more&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;support&quot;&gt;Support:&lt;/h3&gt;

&lt;video controls=&quot;&quot;&gt;
  &lt;source src=&quot;http://www.w3schools.com/html/mov_bbb.mp4&quot; type=&quot;video/mp4&quot; /&gt;
  &lt;source src=&quot;http://www.w3schools.com/html/mov_bbb.ogg&quot; type=&quot;video/ogg&quot; /&gt;
  Your browser does not support HTML5 video.
&lt;/video&gt;
&lt;hr /&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/OsV5RQtmBVw&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;hr /&gt;

</description>
        <pubDate>Sun, 15 Feb 2015 21:14:35 +1100</pubDate>
        <link>http://coopcoding.com/projects/cabin</link>
        <guid isPermaLink="true">http://coopcoding.com/projects/cabin</guid>
        
        <category>foo1</category>
        
        <category>foo2</category>
        
        
        <category>projects</category>
        
      </item>
    
  </channel>
</rss>
